<ion-header>
  <ion-toolbar  color="custom-color">
    <ion-title>Registrarme</ion-title>
    <ion-buttons start>
      <button ion-button (click)="cancel()">
        <span color="primary" showWhen="ios">
          Cancelar
        </span>
        <ion-icon name="md-close" showWhen="android,windows"></ion-icon>
      </button>
    </ion-buttons>
    <ion-buttons end>
      <button ion-button (click)="done()" [disabled]="!isReadyToSave" strong>
        <span color="primary" showWhen="ios">
          Ok
        </span>
        <ion-icon name="md-checkmark" showWhen="core,android,windows"></ion-icon>
      </button>
    </ion-buttons>     
  </ion-toolbar >
</ion-header>

<ion-content>
  <!--<p *ngIf="submitAttempt" style="color: #ea6153;">Please fill out all details accurately.</p>-->
  <form [formGroup]="signUpForm">
    <!-- <input type="file" #fileInput style="visibility: hidden; height: 0px" name="files[]" (change)="processWebImage($event)" />
    <div class="profile-image-wrapper" (click)="presentActionSheet()">
      <div class="profile-image-placeholder" *ngIf="!this.signUpForm.controls.profilePic.value">
        <ion-icon name="add" ></ion-icon>
        <div> Subir Imagen </div>
      </div>
      <div class="profile-image" [style.backgroundImage]="getProfileImageStyle()" *ngIf="this.signUpForm.controls.profilePic.value"></div>
    </div>     -->

    <ion-list>
      <ion-item>        
        <ion-label floating>
          <ion-icon ios="ios-person" md="md-person"></ion-icon> 
          Nombre*
        </ion-label>
        <ion-input type="text" formControlName="name" [class.invalid]="!signUpForm.controls.name.valid && (signUpForm.controls.name.dirty || submitAttempt)"></ion-input>
      </ion-item>

      <ion-item *ngIf="!signUpForm.controls.name.valid  && (signUpForm.controls.name.dirty || submitAttempt)">
        <p style="color: red">Por favor, ingrese un nombre válido.</p>
      </ion-item>

      <ion-item>        
        <ion-label floating>
          <ion-icon ios="ios-mail" md="md-mail"></ion-icon>
          Correo*
        </ion-label>
        <ion-input type="email" formControlName="email" [class.invalid]="!signUpForm.controls.email.valid && (signUpForm.controls.email.dirty || submitAttempt)"></ion-input>
      </ion-item>

      <ion-item *ngIf="!signUpForm.controls.email.valid  && (signUpForm.controls.email.dirty || submitAttempt)">
        <p style="color: red">Por favor, ingrese un correo válido.</p>
      </ion-item> 

      <ion-item>        
        <ion-label floating>
          <ion-icon name="key"></ion-icon>
          Contraseña*
        </ion-label>
        <ion-input type="password" formControlName="password" [class.invalid]="!signUpForm.controls.password.valid  && (signUpForm.controls.password.dirty || submitAttempt)"></ion-input>
      </ion-item>
      
      <ion-item *ngIf="!signUpForm.controls.password.valid  && (signUpForm.controls.password.dirty || submitAttempt)">
        <p style="color: red">Longitud min: 5 - máx: 10</p>
      </ion-item>

      <ion-item>        
        <ion-label floating>
          <ion-icon name="key"></ion-icon>
          Repetir Contraseña*
        </ion-label>
        <ion-input type="password" formControlName="repeatPassword" [class.invalid]="signUpForm.controls.repeatPassword.touched && signUpForm.hasError('mismatchedPasswords')"></ion-input>
      </ion-item>      

      <ion-item *ngIf="signUpForm.controls.repeatPassword.touched && signUpForm.hasError('mismatchedPasswords')">
        <p style="color: red">Las contraseñas no coinciden.</p>
      </ion-item>

      <ion-item>
        <ion-label>
          <ion-icon name="home"></ion-icon>
          Casa
        </ion-label>
        <ion-select formControlName="place_one" cancelText="Cancelar">
          <ion-option value="0">--Seleccionar Barrio--</ion-option>         
          <ion-option *ngFor="let location of locations" value="{{ location.id }}">
            {{ location.name }}
          </ion-option> 
        </ion-select>

      </ion-item>

      <ion-item>        
        <ion-label>
          <ion-icon name="briefcase"></ion-icon>
          Estudio/Trabajo
        </ion-label>

        <ion-select formControlName="place_two" cancelText="Cancelar">   
          <ion-option value="0">--Seleccionar Barrio--</ion-option>        
          <ion-option *ngFor="let location of locations" value="{{ location.id }}">
            {{ location.name }}
          </ion-option>                                                                                              
        </ion-select>        
      </ion-item>

      <ion-item>        
        <ion-label>
          <ion-icon ios="ios-happy" md="md-happy"></ion-icon>
          Distracción
        </ion-label>

        <ion-select formControlName="place_three" cancelText="Cancelar">        
          <ion-option value="0">--Seleccionar Barrio--</ion-option> 
          <ion-option *ngFor="let location of locations" value="{{ location.id }}">
            {{ location.name }}
          </ion-option> 
        </ion-select>
      </ion-item>      

      <div padding>
        <button ion-button color="custom-color" block (click)="doSignup()" [disabled]="!isReadyToSave">Registrarme</button>
        <button ion-button color="custom-color" block (click)="cancel()" class="cancel">Cancelar</button>
      </div>

    </ion-list>
  </form>
</ion-content>
